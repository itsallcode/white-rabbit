plugins {
    id 'com.github.johnrengelman.shadow' version '6.0.0'
}

shadowJar {
    archiveBaseName.set('jfxui')
    archiveVersion.set(null)
}

def mainClass = 'org.itsallcode.whiterabbit.jfxui.App'

jar {
    manifest {
        attributes 'Main-Class': mainClass
    }
}

build.dependsOn shadowJar

task runJfxui(type: JavaExec, dependsOn: shadowJar) {
    classpath = shadowJar.outputs.files
    main = mainClass
    workingDir = rootProject.projectDir
}

ext {
    def os = org.gradle.internal.os.OperatingSystem.current()
    ext.platform = os.windows ? 'win' : (os.linux ? 'linux' : (os.mac ? 'mac' : 'unknown'))
    ext.javaFxVersion = '14.0.1'
}

dependencies {
    implementation project(':logic')
    implementation "org.openjfx:javafx-base:$javaFxVersion:$platform"
    implementation "org.openjfx:javafx-graphics:$javaFxVersion:$platform"
    implementation "org.openjfx:javafx-controls:$javaFxVersion:$platform"
    
    implementation "org.eclipse.jdt:org.eclipse.jdt.annotation:2.2.600"
}
