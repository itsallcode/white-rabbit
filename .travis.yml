dist: xenial
language: java
sudo: false

before_script:
  # Required for sonar to provide blame information
  - git fetch --unshallow

script:
  - ./gradlew clean check sonarqube --stacktrace -Dsonar.login=$SONAR_TOKEN

before_cache:
  - rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
  - rm -fr $HOME/.gradle/caches/*/plugin-resolution/

cache:
  directories:
    - $HOME/.sonar/cache/
    - $HOME/.gradle/caches/
    - $HOME/.gradle/wrapper/

addons:
  sonarcloud:
    organization: "itsallcode"
    token:
      secure: "3SA61ejBww0dANUO7HTHAIdXxWGGHXwpmVkoBWNkFhOKqrt50gF7EvBz8nW3MobHLHKfyrCMUcnZbAgL+8KtswO6bHvAq1OON11lWOzdjHnP7nSz9MWpDVB+qXY3+dZkkt4QTju4Jzfy0KF9yn4uTccBVIEg0dn37j8b5E6cK1u6Pm4AegRBxUh5bKGY5TgBhqnK6hDMBrrADydVWmrT1UC2OYK+OPmuoB9ujQ/r6MUrw8FtSHC9B/Ku0wLBNr8y9hEcnCYJwTjmHKvtAcX1NKCntXjfpL1P6IPPBNBUOVsLds2VpAISd1TTbgQvZOFRtvz6egGp6VYjnIpZM/oaJrWUFnF/MSGyG/tP7D2lOwaUwYVHMI1DI7RuAhURCP1J9FdW1gAVjnjIKpKfzbAlElAVp1K03WLbI9RVQ48/k/dnx17Wzud4SlO2lzh5iUZa3ZitYQvrev/0J/36EgIqm3tJ0LrWteOyOD0GJECXEzECPlUp8tixsDcaMoj9dmxpNUHTLnNrMv+Q3AIDudhyAcuiP66XmJO7JG/whxRe+GQZJyncegEESSi8P5p5cbwB6dR0FwuXQ4vvbPO5bfgDxZMOfGabbWHy2gQd+T2VxgVnuR9mkVoeymY03mV2Xqxv3AAEh1oNsUxmVk/PeQorLVocpL9Jf4j6IBOy1ucPeeM="
